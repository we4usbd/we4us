<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>রক্তদাতা সন্ধান - আমাদের জন্য আমরা</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase SDK এবং কনফিগারেশন (Common Setup) -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
      import { getAuth } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
      import { getFirestore } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "AIzaSyDu8VDVXEbrLbqPmD24OPgNhbH5xjwi_vA",
        authDomain: "we4usnur.firebaseapp.com",
        projectId: "we4usnur",
        storageBucket: "we4usnur.firebasestorage.app",
        messagingSenderId: "1069907132834",
        appId: "1:1069907132834:web:f6aec92fc61c413767f2fb",
        measurementId: "G-LZCCHNFRSN"
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const db = getFirestore(app);
      
      window.auth = auth;
      window.db = db;
    </script>

    <style>
        /* CSS অপরিবর্তিত রাখা হয়েছে */
        :root {
            --primary: #e53935;
            --primary-dark: #c62828;
            --secondary: #f5f5f5;
            --text: #333;
            --white: #fff;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }
        body { background-color: var(--secondary); font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; }
        .search-page-view { display: block; position: relative; background-color: var(--secondary); animation: fadeIn 0.5s ease; }
        .search-view-content { display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 20px; }
        .search-container { background-color: var(--white); border-radius: 30px; box-shadow: var(--shadow); padding: 40px; width: 100%; max-width: 600px; position: relative; overflow: hidden; }
        .search-container::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 5px; background: linear-gradient(90deg, var(--primary), var(--primary-dark)); }
        .search-title { text-align: center; margin-bottom: 30px; color: var(--text); font-size: 1.8rem; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .search-title i { color: var(--primary); }
        .search-form { display: flex; flex-direction: column; gap: 20px; }
        .search-form .form-group label { font-weight: 500; color: var(--text); display: flex; align-items: center; gap: 8px; }
        .search-form .form-group label i { color: var(--primary); width: 20px; }
        .form-control { width: 100%; padding: 12px 15px; border: 1px solid #ddd; border-radius: 10px; font-size: 1rem; transition: var(--transition); background-color: #f9f9f9; }
        .form-control:focus { border-color: var(--primary); outline: none; box-shadow: 0 0 0 3px rgba(229, 57, 53, 0.2); background-color: var(--white); }
        .search-btn { background: var(--primary); color: var(--white); border: none; padding: 15px; border-radius: 10px; font-weight: 600; font-size: 1.1rem; cursor: pointer; transition: var(--transition); margin-top: 10px; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .search-btn:hover { background: var(--primary-dark); transform: translateY(-2px); box-shadow: 0 6px 15px rgba(229, 57, 53, 0.3); }
        .back-link { text-align: center; margin-top: 20px; }
        .back-link a { color: var(--primary); text-decoration: none; font-weight: 500; cursor: pointer; display: inline-flex; align-items: center; gap: 5px; transition: var(--transition); }
        .back-link a:hover { text-decoration: underline; gap: 8px; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>
    
    <!-- Search Page View -->
    <div class="search-page-view" id="searchPageView">
        <div class="search-view-content">
            <div class="search-container">
                <h1 class="search-title"><i class="fas fa-search"></i> রক্তদাতা সন্ধান</h1>
                <form class="search-form" id="searchForm">
                    <div class="form-group"><label for="division"><i class="fas fa-map-marker-alt"></i>বিভাগ</label><select id="division" class="form-control" required><option value="" disabled selected>বিভাগ নির্বাচন করুন</option><option value="dhaka">ঢাকা</option><option value="chattogram">চট্টগ্রাম</option><option value="rajshahi">রাজশাহী</option><option value="khulna">খুলনা</option><option value="barishal">বরিশাল</option><option value="sylhet">সিলেট</option><option value="rangpur">রংপুর</option><option value="mymensingh">ময়মনসিংহ</option></select></div>
                    <div class="form-group"><label for="district"><i class="fas fa-map-marked-alt"></i>জেলা</label><select id="district" class="form-control" disabled required><option value="" disabled selected>প্রথমে বিভাগ নির্বাচন করুন</option></select></div>
                    <div class="form-group"><label for="upazila"><i class="fas fa-location-arrow"></i>উপজেলা</label><select id="upazila" class="form-control" disabled required><option value="" disabled selected>প্রথমে জেলা নির্বাচন করুন</option></select></div>
                    <div class="form-group"><label for="bloodGroup"><i class="fas fa-tint"></i>রক্তের গ্রুপ</label><select id="bloodGroup" class="form-control" required><option value="" disabled selected>রক্তের গ্রুপ নির্বাচন করুন</option><option value="A+">A+</option><option value="A-">A-</option><option value="B+">B+</option><option value="B-">B-</option><option value="O+">O+</option><option value="O-">O-</option><option value="AB+">AB+</option><option value="AB-">AB-</option></select></div>
                    <button type="submit" class="search-btn"><i class="fas fa-search"></i> রক্তদাতা খুঁজুন</button>
                </form>
                <div class="back-link"><a href="index.html"><i class="fas fa-arrow-left"></i> Go Back</a></div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const locationData = { dhaka: { name: "ঢাকা", districts: { dhaka: { name: "ঢাকা", upazilas: ["সাভার", "ধামরাই", "কেরানীগঞ্জ", "নবাবগঞ্জ", "দোহার"] }, faridpur: { name: "ফরিদপুর", upazilas: ["ফরিদপুর সদর", "আলফাডাঙ্গা", "বোয়ালমারী", "সদরপুর", "নগরকান্দা", "ভাঙ্গা", "চরভদ্রাসন", "মধুখালী", "সালথা"] }, gazipur: { name: "গাজীপুর", upazilas: ["গাজীপুর সদর", "কালিয়াকৈর", "কাপাসিয়া", "শ্রীপুর", "কালীগঞ্জ"] }, gopalganj: { name: "গোপালগঞ্জ", upazilas: ["গোপালগঞ্জ সদর", "কাশিয়ানী", "কোটালীপাড়া", "মুকসুদপুর", "টুঙ্গিপাড়া"] }, kishoreganj: { name: "কিশোরগঞ্জ", upazilas: ["কিশোরগঞ্জ সদর", "অষ্টগ্রাম", "বাজিতপুর", "ভৈরব", "হোসেনপুর", "ইটনা", "করিমগঞ্জ", "কটিয়াদী", "কুলিয়ারচর", "মিঠামইন", "নিকলী", "পাকুন্দিয়া", "তাড়াইল"] }, madaripur: { name: "মাদারীপুর", upazilas: ["মাদারীপুর সদর", "কালকিনি", "রাজৈর", "শিবচর", "ডাসার"] }, manikganj: { name: "মানিকগঞ্জ", upazilas: ["মানিকগঞ্জ সদর", "দৌলতপুর", "ঘিওর", "হরিরামপুর", "সাটুরিয়া", "শিবালয়", "সিঙ্গাইর"] }, munshiganj: { name: "মুন্সিগঞ্জ", upazilas: ["মুন্সিগঞ্জ সদর", "গজারিয়া", "লৌহজং", "সিরাজদিখান", "শ্রীনগর", "টঙ্গিবাড়ী"] }, narayanganj: { name: "নারায়ণগঞ্জ", upazilas: ["নারায়ণগঞ্জ সদর", "আড়াইহাজার", "বন্দর", "রূপগঞ্জ", "সোনারগাঁও"] }, narsingdi: { name: "নরসিংদী", upazilas: ["নরসিংদী সদর", "বেলাবো", "মনোহরদী", "পলাশ", "রায়পুরা", "শিবপুর"] }, rajbari: { name: "রাজবাড়ী", upazilas: ["রাজবাড়ী সদর", "বালিয়াকান্দি", "গোয়ালন্দ", "পাংশা", "কালুখালী"] }, shariatpur: { name: "শরীয়তপুর", upazilas: ["শরীয়তপুর সদর", "ভেদরগঞ্জ", "ডামুড্যা", "গোসাইরহাট", "নড়িয়া", "জাজিরা"] }, tangail: { name: "টাঙ্গাইল", upazilas: ["টাঙ্গাইল সদর", "বাসাইল", "ভুঞাপুর", "দেলদুয়ার", "ঘাটাইল", "গোপালপুর", "মধুপুর", "মির্জাপুর", "নাগরপুর", "সখিপুর", "ধনবাড়ী", "কালিহাতী"] } } }, chattogram: { name: "চট্টগ্রাম", districts: { bandarban: { name: "বান্দরবান", upazilas: ["বান্দরবান সদর", "আলীকদম", "নাইক্ষ্যংছড়ি", "রোয়াংছড়ি", "রুমা", "থানচি", "লামা"] }, brahmanbaria: { name: "ব্রাহ্মণবাড়িয়া", upazilas: ["ব্রাহ্মণবাড়িয়া সদর", "আশুগঞ্জ", "বাঞ্ছারামপুর", "কসবা", "নবীনগর", "নাসিরনগর", "সরাইল", "আখাউড়া", "বিজয়নগর"] }, chandpur: { name: "চাঁদপুর", upazilas: ["চাঁদপুর সদর", "ফরিদগঞ্জ", "হাজীগঞ্জ", "হাইমচর", "কচুয়া", "মতলব উত্তর", "মতলব দক্ষিণ", "শাহরাস্তি"] }, chattogram: { name: "চট্টগ্রাম", districts: { chattogram: { name: "চট্টগ্রাম", upazilas: ["আনোয়ারা", "বাঁশখালী", "বোয়ালখালী", "চন্দনাইশ", "ফটিকছড়ি", "হাটহাজারী", "কর্ণফুলী", "লোহাগাড়া", "মীরসরাই", "পটিয়া", "রাঙ্গুনিয়া", "রাউজান", "সন্দ্বীপ", "সাতকানিয়া", "সীতাকুণ্ড", "আগ্রাবাদ", "কোতয়ালী", "চট্টগ্রাম সদর"] } }, cumilla: { name: "কুমিল্লা", upazilas: ["কুমিল্লা সদর", "বরুড়া", "ব্রাহ্মণপাড়া", "বুড়িচং", "চান্দিনা", "চৌদ্দগ্রাম", "দাউদকান্দি", "দেবিদ্বার", "হোমনা", "লাকসাম", "লালমাই", "মনোহরগঞ্জ", "মেঘনা", "মুরাদনগর", "নাঙ্গলকোট", "তিতাস"] }, coxbazar: { name: "কক্সবাজার", upazilas: ["কক্সবাজার সদর", "চকরিয়া", "কুতুবদিয়া", "মহেশখালী", "পেকুয়া", "রামু", "টেকনাফ", "উখিয়া", "ঈদগাঁও"] }, feni: { name: "ফেনী", upazilas: ["ফেনী সদর", "ছাগলনাইয়া", "দাগনভূঞা", "পরশুরাম", "সোনাগাজী", "ফুলগাজী"] }, khagrachari: { name: "খাগড়াছড়ি", upazilas: ["খাগড়াছড়ি সদর", "দীঘিনালা", "লক্ষ্মীছড়ি", "মহালছড়ি", "মানিকছড়ি", "মাটিরাঙ্গা", "পানছড়ি", "রামগড়", "গুইমারা"] }, lakshmipur: { name: "লক্ষ্মীপুর", upazilas: ["লক্ষ্মীপুর সদর", "কমলনগর", "রায়পুর", "রামগঞ্জ", "রামগতি"] }, noakhali: { name: "নোয়াখালী", upazilas: ["নোয়াখালী সদর", "বেগমগঞ্জ", "চাটখিল", "কোম্পানীগঞ্জ", "হাতিয়া", "সেনবাগ", "সুবর্ণচর", "কবিরহাট"] }, rangamati: { name: "রাঙ্গামাটি", upazilas: ["রাঙ্গামাটি সদর", "বাঘাইছড়ি", "বরকল", "নানিয়ারচর", "রাজস্থলী", "কাপ্তাই", "জুরাছড়ি", "লংগদু", "কাউনখালী", "বিলাইছড়ি"] } } }, rajshahi: { name: "রাজশাহী", districts: { bogura: { name: "বগুড়া", upazilas: ["বগুড়া সদর", "আদমদীঘি", "ধুনট", "দুপচাঁচিয়া", "গাবতলী", "কাহালু", "নন্দীগ্রাম", "সারিয়াকান্দি", "শাজাহানপুর", "শেরপুর", "শিবগঞ্জ", "সোনাতলা"] }, chapainawabganj: { name: "চাঁপাইনবাবগঞ্জ", upazilas: ["চাঁপাইনবাবগঞ্জ সদর", "ভোলাহাট", "গোমস্তাপুর", "নাচোল", "শিবগঞ্জ"] }, joypurhat: { name: "জয়পুরহাট", upazilas: ["জয়পুরহাট সদর", "আক্কেলপুর", "কালাই", "ক্ষেতলাল", "পাঁচবিবি"] }, naogaon: { name: "নওগাঁ", upazilas: ["নওগাঁ সদর", "আত্রাই", "বদলগাছী", "ধামইরহাট", "মান্দা", "মহাদেবপুর", "নিয়ামতপুর", "পত্নীতলা", "পোরশা", "রানীনগর", "সাপাহার"] }, natore: { name: "নাটোর", upazilas: ["নাটোর সদর", "বাগাতিপাড়া", "বড়াইগ্রাম", "গুরুদাসপুর", "লালপুর", "সিংড়া", "নলডাঙ্গা"] }, pabna: { name: "পাবনা", upazilas: ["pabna সদর", "আটঘরিয়া", "বেড়া", "ভাঙ্গুড়া", "চাটমোহর", "ফরিদপুর", "ঈশ্বরদী", "সাঁথিয়া", "সুজানগর"] }, rajshahi: { name: "রাজশাহী", upazilas: ["রাজশাহী বিশ্ববিদ্যালয়", "বাঘা", "বাগমারা", "চারঘাট", "দুর্গাপুর", "গোদাগাড়ী", "মোহনপুর", "পবা", "পুঠিয়া", "তানোর"] }, sirajganj: { name: "সিরাজগঞ্জ", upazilas: ["সিরাজগঞ্জ সদর", "বেলকুচি", "চৌহালি", "কামারখন্দ", "কাজীপুর", "রায়গঞ্জ", "শাহজাদপুর", "তাড়াশ", "উল্লাপাড়া"] } } }, khulna: { name: "খুলনা", districts: { bagerhat: { name: "বাগেরহাট", upazilas: ["বাগেরহাট সদর", "চিতলমারী", "ফকিরহাট", "কচুয়া", "মোল্লাহাট", "মোংলা", "মোরেলগঞ্জ", "রামপাল", "শরণখোলা"] }, chuadanga: { name: "চুয়াডাঙ্গা", upazilas: ["চুয়াডাঙ্গা সদর", "আলমডাঙ্গা", "দামুড়হুদা", "জীবননগর"] }, jashore: { name: "যশোর", upazilas: ["যশোর সদর", "অভয়নগর", "বাঘারপাড়া", "চৌগাছা", "ঝিকরগাছা", "কেশবপুর", "মণিরামপুর", "শার্শা"] }, jhenaidah: { name: "ঝিনাইদহ", upazilas: ["ঝিনাইদহ সদর", "হরিণাকুণ্ডু", "কালীগঞ্জ", "কোটচাঁদপুর", "মহেশপুর", "শৈলকুপা"] }, khulna: { name: "খুলনা", upazilas: ["ডুমুরিয়া", "বটিয়াঘাটা", "দাকোপ", "দিঘলিয়া", "কয়রা", "পাইকগাছা", "ফুলতলা", "রূপসা", "তেরখাদা", "নিউমার্কেট", "সোনাডাঙ্গা"] }, kushtia: { name: "কুষ্টিয়া", upazilas: ["কুষ্টিয়া সদর", "ভেড়ামারা", "দৌলতপুর", "খোকসা", "কুমারখালী", "মিরপুর"] }, magura: { name: "মাগুরা", upazilas: ["মাগুরা সদর", "মহম্মদপুর", "শালিখা", "শ্রীপুর"] }, meherpur: { name: "মেহেরপুর", upazilas: ["মেহেরপুর সদর", "গাংনী", "মুজিবনগর"] }, narail: { name: "নড়াইল", upazilas: ["নড়াইল সদর", "কালিয়া", "লোহাগড়া"] }, satkhira: { name: "সাতক্ষীরা", upazilas: ["সাতক্ষীরা সদর", "কলারোয়া", "তালা", "দেবহাটা", "কালিগঞ্জ", "আশাশুনি", "শ্যামনগর"] } } }, barishal: { name: "বরিশাল", districts: { barguna: { name: "বরগুনা", upazilas: ["বরগুনা সদর", "আমতলী", "বেতাগী", "বামনা", "পাথরঘাটা", "তালতলী"] }, barishal: { name: "বরিশাল", districts: { barishal: { name: "বরিশাল", upazilas: ["বরিশাল সদর", "আগৈলঝাড়া", "বাবুগঞ্জ", "বাকেরগঞ্জ", "বানারীপাড়া", "গৌরনদী", "হিজলা", "মেহেন্দিগঞ্জ", "মুলাদী", "উজিরপুর"] } }, bhola: { name: "ভোলা", upazilas: ["ভোলা সদর", "বোরহানউদ্দিন", "চরফ্যাশন", "দৌলতখান", "লালমোহন", "মনপুরা", "তজুমদ্দিন"] }, jhalokati: { name: "ঝালকাঠি", upazilas: ["ঝালকাঠি সদর", "কাঁঠালিয়া", "নলছিটি", "রাজাপুর"] }, patuakhali: { name: "পটুয়াখালী", upazilas: ["পটুয়াখালী সদর", "বাউফল", "দশমিনা", "গলাচিপা", "কলাপাড়া", "মির্জাগঞ্জ", "দুমকি", "রাঙ্গাবালী"] }, pirojpur: { name: "পিরোজপুর", upazilas: ["পিরোজপুর সদর", "ভান্ডারিয়া", "কাউখালী", "মঠবাড়িয়া", "নাজিরপুর", "নেছারাবাদ (স্বরূপকাঠি)", "ইন্দুরকানী"] } } }, sylhet: { name: "সিলেট", districts: { habiganj: { name: "হবিগঞ্জ", upazilas: ["হবিগঞ্জ সদর", "আজমিরীগঞ্জ", "বানিয়াচং", "বাহুবল", "চুনারুঘাট", "লাখাই", "মাধবপুর", "নবীগঞ্জ", "শায়েস্তাগঞ্জ"] }, moulvibazar: { name: "মৌলভীবাজার", upazilas: ["মৌলভীবাজার সদর", "বড়লেখা", "জুড়ী", "কমলগঞ্জ", "কুলাউড়া", "রাজনগর", "শ্রীমঙ্গল"] }, sunamganj: { name: "সুনামগঞ্জ", upazilas: ["সুনামগঞ্জ সদর", "বিশ্বম্ভরপুর", "ছাতক", "দিরাই", "ধর্মপাশা", "দোয়ারাবাজার", "জগন্নাথপুর", "জামালগঞ্জ", "শাল্লা", "তাহিরপুর", "দক্ষিণ সুনামগঞ্জ", "মধ্যনগর"] }, sylhet: { name: "সিলেট", districts: { sylhet: { name: "সিলেট", upazilas: ["সিলেট সদর", "বালাগঞ্জ", "বিয়ানীবাজার", "কোম্পানীগঞ্জ", "ফেঞ্চুগঞ্জ", "গোলাপগঞ্জ", "গোয়াইনঘাট", "জৈন্তাপুর", "কানাইঘাট", "জকিগঞ্জ", "দক্ষিণ সুরমা", "ওসমানীনগর", "আম্বরখানা", "জিন্দাবাজার"] } } } }, rangpur: { name: "রংপুর", districts: { dinajpur: { name: "দিনাজপুর", upazilas: ["দিনাজপুর সদর", "বিরামপুর", "বীরগঞ্জ", "বিরল", "বোচাগঞ্জ", "চিরিরবন্দর", "ফুলবাড়ী", "ঘোড়াঘাট", "হাকিমপুর", "কাহারোল", "খানসামা", "নবাবগঞ্জ", "পার্বতীপুর"] }, gaibandha: { name: "গাইবান্ধা", upazilas: ["গাইবান্ধা সদর", "ফুলছড়ি", "গোবিন্দগঞ্জ", "পলাশবাড়ী", "সাদুল্লাপুর", "সাঘাটা", "সুন্দরগঞ্জ"] }, kurigram: { name: "কুড়িগ্রাম", upazilas: ["কুড়িগ্রাম সদর", "ভূরুঙ্গামারী", "চর রাজিবপুর", "চিলমারী", "ফুলবাড়ী", "naগেশ্বরী", "রাজারহাট", "রৌমারী", "উলিপুর"] }, lalmonirhat: { name: "লালমনিরহাট", upazilas: ["লালমনিরহাট সদর", "আদিতমারী", "হাতীবান্ধা", "কালীগঞ্জ", "পাটগ্রাম"] }, nilphamari: { name: "নীলফামারী", upazilas: ["নীলফামারী সদর", "ডোমার", "ডিমলা", "জলঢাকা", "কিশোরগঞ্জ", "সৈয়দপুর"] }, panchagarh: { name: "পঞ্চগড়", upazilas: ["পঞ্চগড় সদর", "আটোয়ারী", "বোদা", "দেবীগঞ্জ", "তেঁতুলিয়া"] }, rangpur: { name: "রংপুর", upazilas: ["রংপুর সদর", "বদরগঞ্জ", "গঙ্গাচড়া", "কাউনিয়া", "মিঠাপুকুর", "পীরগাছা", "পীরগঞ্জ", "তারাগঞ্জ"] }, thakurgaon: { name: "ঠাকুরগাঁও", upazilas: ["ঠাকুরগাঁও সদর", "বালিয়াডাঙ্গী", "হরিপুর", "পীরগঞ্জ", "রানীশংকৈল"] } } }, mymensingh: { name: "ময়মনসিংহ", districts: { jamalpur: { name: "জামালপুর", upazilas: ["jamalpur সদর", "বকশীগঞ্জ", "দেওয়ানগঞ্জ", "ইসলামপুর", "মাদারগঞ্জ", "মেলান্দহ", "সরিষাবাড়ী"] }, mymensingh: { name: "ময়মনসিংহ", upazilas: ["ময়মনসিংহ সদর", "ভালুকা", "ত্রিশাল", "তারাকান্দা", "ফুলপুর", "ফুলবাড়ীয়া", "গফরগাঁও", "গৌরীপুর", "হালুয়াঘাট", "ঈশ্বরগঞ্জ", "মুক্তাগাছা", "নান্দাইল", "ধোবাউড়া"] }, netrokona: { name: "নেত্রকোনা", upazilas: ["নেত্রকোনা সদর", "বারহাট্টা", "দুর্গাপুর", "কেন্দুয়া", "কলমাকান্দা", "মদন", "মোহনগঞ্জ", "পূর্বধলা", "খালিয়াজুরী", "আটপাড়া"] }, sherpur: { name: "শেরপুর", upazilas: ["শেরপুর সদর", "ঝিনাইগাতী", "নকলা", "নালিতাবাড়ী", "শ্রীবরদী"] } } } };

            const divisionSelect = document.getElementById('division');
            const districtSelect = document.getElementById('district');
            const upazilaSelect = document.getElementById('upazila');
            const searchForm = document.getElementById('searchForm');

            divisionSelect.addEventListener('change', function () {
                const selectedDivision = this.value;
                districtSelect.innerHTML = '<option value="" disabled selected>জেলা নির্বাচন করুন</option>'; districtSelect.disabled = false;
                upazilaSelect.innerHTML = '<option value="" disabled selected>প্রথমে জেলা নির্বাচন করুন</option>'; upazilaSelect.disabled = true;
                if (selectedDivision && locationData[selectedDivision]) {
                    const districts = locationData[selectedDivision].districts;
                    for (const key in districts) { const option = document.createElement('option'); option.value = key; option.textContent = districts[key].name; districtSelect.appendChild(option); }
                }
            });

            districtSelect.addEventListener('change', function () {
                const selectedDivision = divisionSelect.value; const selectedDistrict = this.value;
                upazilaSelect.innerHTML = '<option value="" disabled selected>উপজেলা নির্বাচন করুন</option>'; upazilaSelect.disabled = false;
                if (selectedDivision && selectedDistrict && locationData[selectedDivision].districts[selectedDistrict]) {
                    const upazilas = locationData[selectedDivision].districts[selectedDistrict].upazilas;
                    upazilas.forEach(upazila => { const option = document.createElement('option'); option.value = upazila; option.textContent = upazila; upazilaSelect.appendChild(option); });
                }
            });

            searchForm.addEventListener('submit', function (e) {
                e.preventDefault();
                const division = divisionSelect.value;
                const district = districtSelect.value;
                const upazila = upazilaSelect.value; 
                const bloodGroup = document.getElementById('bloodGroup').value;

                if (!division || !district || !upazila || !bloodGroup) {
                    alert('দয়া করে সকল তথ্য পূরণ করুন।');
                    return;
                }
                
                // URL প্যারামিটার হিসেবে ডাটা পাস করা
                const selectedDivisionName = divisionSelect.options[divisionSelect.selectedIndex].text;
                const selectedDistrictName = districtSelect.options[districtSelect.selectedIndex].text;
                const selectedUpazilaName = upazilaSelect.options[upazilaSelect.selectedIndex].text;

                // ইউজারকে results.html পেজে রিডাইরেক্ট করুন
                window.location.href = `search_result.html?division=${division}&district=${district}&upazila=${upazila}&bloodGroup=${encodeURIComponent(bloodGroup)}`;
            });
        });
    </script>
</body>
</html>